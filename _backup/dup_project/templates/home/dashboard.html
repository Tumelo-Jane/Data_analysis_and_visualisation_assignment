{% extends 'base.html' %}

{% block content %}

<!-- Data Overview Section -->
<section id="description" class="section-container">
    <div class="overview-card">
        <h5 class="section-title">Data Overview</h5>
        <p class="overview-text">
            This dashboard compares South Africa's <strong>GDP Growth</strong> and <strong>Inflation Trends</strong> 
            across pre- and post-apartheid periods. Key statistics are summarized in the cards below, while 
            the charts visualize annual changes and correlations.
        </p>
    </div>
</section>

<!-- Statistics Cards Section -->
<section id="stats" class="section-container">
    <h4 class="stats-title">Inflation Stats</h4>
    <div class="stats-grid">
        <div class="stat-card mean-card">
            <div class="stat-icon back-mean">
                <i class="bi bi-calculator calculator"></i>
            </div>
            <h3 class="stat-number">7.84</h3>
            <p class="stat-label">Mean</p>
        </div>
        <div class="stat-card std-card">
            <div class="stat-icon back-std">
                <i class="bi bi-graph-up graph-up"></i>
            </div>
            <h3 class="stat-number">4.53</h3>
            <p class="stat-label">Standard Deviation</p>
        </div>
        <div class="stat-card min-card">
            <div class="stat-icon back-min">
                <i class="bi bi-arrow-down arrow-down"></i>
            </div>
            <h3 class="stat-number">-0.69</h3>
            <p class="stat-label">Minimum Value</p>
        </div>
        <div class="stat-card max-card">
            <div class="stat-icon back-max">
                <i class="bi bi-arrow-up arrow-up"></i>
            </div>
            <h3 class="stat-number">18.65</h3>
            <p class="stat-label">Maximum Value</p>
        </div>
    </div>

    <h4 class="stats-title">GDP Stats</h4>
    <div class="stats-grid">
        <div class="stat-card mean-card">
            <div class="stat-icon back-mean">
                <i class="bi bi-calculator calculator"></i>
            </div>
            <h3 class="stat-number">2.79</h3>
            <p class="stat-label">Mean</p>
        </div>
        <div class="stat-card std-card">
            <div class="stat-icon back-std">
                <i class="bi bi-graph-up graph-up"></i>
            </div>
            <h3 class="stat-number">2.62</h3>
            <p class="stat-label">Standard Deviation</p>
        </div>
        <div class="stat-card min-card">
            <div class="stat-icon back-min">
                <i class="bi bi-arrow-down arrow-down"></i>
            </div>
            <h3 class="stat-number">-6.17</h3>
            <p class="stat-label">Minimum Value</p>
        </div>
        <div class="stat-card max-card">
            <div class="stat-icon back-max">
                <i class="bi bi-arrow-up arrow-up"></i>
            </div>
            <h3 class="stat-number">7.94</h3>
            <p class="stat-label">Maximum Value</p>
        </div>
    </div>
</section>

<!-- Charts Section -->
<section id="charts" class="section-container">
    <div class="charts-row">
        <div class="chart-column left-column">
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th colspan="4" class="table-title">GDP & Inflation Description</th>
                        </tr>
                        <tr class="table-headers">
                            <th></th>
                            <th class="year-col">Year</th>
                            <th class="inflation-col">Inflation</th>
                            <th class="gdp-col">GDP</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><th scope="row">Count</th><td>63.000000</td><td>63.000000</td><td>63.000000</td></tr>
                        <tr><th scope="row">Mean</th><td>1992.000000</td><td>7.839404</td><td>2.786620</td></tr>
                        <tr><th scope="row">Std</th><td>18.330303</td><td>4.565871</td><td>2.640099</td></tr>
                        <tr><th scope="row">Min</th><td>1961.000000</td><td>-0.692030</td><td>-6.168918</td></tr>
                        <tr><th scope="row">25%</th><td>1976.500000</td><td>4.528904</td><td>1.277710</td></tr>
                        <tr><th scope="row">50%</th><td>1992.000000</td><td>6.425708</td><td>3.014480</td></tr>
                        <tr><th scope="row">75%</th><td>2007.500000</td><td>11.339223</td><td>4.563252</td></tr>
                        <tr><th scope="row">Max</th><td>2023.000000</td><td>18.654919</td><td>7.939609</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="chart-container">
                <canvas id="multiLineChart"></canvas>
            </div>
        </div>
        
        <div class="chart-column right-column">
            <div class="chart-container">
                <canvas id="barGraph"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="scatterGraph"></canvas>
            </div>
             <!-- Correlation Card -->
            <div class="card shadow rounded-4 p-4" style="max-width: 24rem; width: 100%; margin-left: 50px;">
                <div class="d-flex flex-column">
                    <div class="fs-1 fw-bold text-dark lh-sm">
                        -0.3476
                    </div>
                    <div class="fs-5 fw-medium text-secondary mt-2">
                        Correlation Coefficient
                    </div>
                </div>
                <div class="my-3"></div>
                <div class="d-flex flex-column">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="fw-medium text-secondary">
                            Negative Correlation
                        </div>
                        <div class="d-flex align-items-center fs-6 fw-semibold text-danger">
                            <i class="bi bi-arrow-down-short me-1"></i>
                            -34.76%
                        </div>
                    </div>
                    <div class="progress mt-2" style="height: 0.5rem; border-radius: 1rem;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 34.76%;"
                            aria-valuenow="34.76" aria-valuemin="0" aria-valuemax="100">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- Visualization Section -->
<section id="viz" class="section-container">
    <div class="viz-row">
        <div class="chart-container">
            <canvas id="pieChart"></canvas>
        </div>
        <div class="chart-container">
            <canvas id="doughnutChart"></canvas>
        </div>
    </div>

    <div class="charts-row">
        <div class="chart-container">
            <canvas id="gdpInflationChart"></canvas>
        </div>
        <div class="chart-container">
            <canvas id="barChart"></canvas>
        </div>
    </div>
</section>

<!-- Chart Scripts -->

<script>
// Bar Chart - Inflation Trends 2014-2023
const xValues = ["2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023"];
const yValues = [6.13, 4.54, 6.57, 5.18, 4.52, 4.12, 3.21, 4.61, 7.04, 6.07];
const barColors = [
    'rgba(255, 99, 132, 0.7)', 'rgba(255, 140, 180, 0.7)', 'rgba(199, 21, 133, 0.7)',
    'rgba(54, 162, 235, 0.7)', 'rgba(100, 149, 237, 0.7)', 'rgba(25, 25, 112, 0.7)',
    'rgba(153, 102, 255, 0.7)', 'rgba(186, 85, 211, 0.7)', 'rgba(148, 0, 211, 0.7)',
    'rgba(221, 160, 221, 0.7)'
];

new Chart("barGraph", {
    type: "bar",
    data: {
        labels: xValues,
        datasets: [{
            backgroundColor: barColors,
            borderColor: barColors.map(c => c.replace('0.7', '1')),
            borderWidth: 2,
            data: yValues
        }]
    },
    options: {
        responsive: true,
        legend: { display: false },
        title: {
            display: true,
            text: "Inflation Trends in South Africa (2014-2023)",
            font: { size: 16 }
        },
        scales: {
            y: {
                beginAtZero: true,
                title: { display: true, text: 'Inflation Rate (%)' }
            }
        }
    }
});

// Scatter Plot - GDP vs Inflation
const scatterData = [
    { x: -6.4, y: 0.0 }, { x: -2.5, y: 14.0 }, { x: -1.2, y: 6.0 }, { x: 0.0, y: 18.5 },
    { x: 0.0, y: 12.0 }, { x: 0.0, y: 9.0 }, { x: 1.2, y: 4.5 }, { x: 1.5, y: 6.0 },
    { x: 2.0, y: 7.0 }, { x: 2.5, y: 6.1 }, { x: 3.1, y: 6.5 }, { x: 3.5, y: 11.0 },
    { x: 4.0, y: 9.0 }, { x: 4.9, y: 4.6 }, { x: 6.0, y: 3.0 }, { x: 7.0, y: 2.5 }, { x: 8.0, y: 2.0 }
];

new Chart("scatterGraph", {
    type: "scatter",
    data: {
        datasets: [{
            label: "GDP vs Inflation",
            data: scatterData,
            backgroundColor: "rgba(153, 102, 255, 0.6)",
            borderColor: "rgb(153, 102, 255)",
            pointRadius: 6
        }]
    },
    options: {
        responsive: true,
        title: {
            display: true,
            text: "GDP vs Inflation Correlation",
            font: { size: 16 }
        },
        scales: {
            x: {
                type: 'linear',
                position: 'bottom',
                title: { display: true, text: 'GDP Growth (%)' }
            },
            y: {
                title: { display: true, text: 'Inflation Rate (%)' }
            }
        }
    }
});

// Multi-line Chart
const x_Values = [1960, 1970, 1980, 1990, 2000, 2010, 2020];

new Chart("multiLineChart", {
    type: "line",
    data: {
        labels: x_Values,
        datasets: [{
            label: "GDP YoY Change",
            data: [2, 3, 4, -3, 5, 6, 4],
            borderColor: 'rgba(255, 99, 132, 1)',
            backgroundColor: 'rgba(255, 99, 132, 0.1)',
            borderWidth: 3,
            fill: false
        }, {
            label: "Inflation YoY Change",
            data: [1, 9, 3, 2, 4, -2.5, 6],
            borderColor: 'rgba(199, 21, 133, 1)',
            backgroundColor: 'rgba(199, 21, 133, 0.1)',
            borderWidth: 3,
            fill: false
        }]
    },
    options: {
        responsive: true,
        legend: { display: true },
        title: {
            display: true,
            text: "Year-over-Year Changes (1960-2020)",
            font: { size: 16 }
        },
        scales: {
            x: {
                title: { display: true, text: 'Year' }
            },
            y: {
                title: { display: true, text: 'YoY Change (%)' }
            }
        }
    }
});

// Pie Chart - GDP Comparison
new Chart("pieChart", {
    type: "pie",
    data: {
        labels: ["Pre-Apartheid GDP Mean", "Post-Apartheid GDP Mean"],
        datasets: [{
            backgroundColor: ["#00aba9", "#e8c3b9"],
            data: [57.3, 42.7],
            borderWidth: 2,
            borderColor: "#fff"
        }]
    },
    options: {
        responsive: true,
        title: {
            display: true,
            text: "GDP Mean: Pre vs Post Apartheid (%)",
            font: { size: 16 }
        }
    }
});

// Doughnut Chart - Inflation Comparison
new Chart("doughnutChart", {
    type: "doughnut",
    data: {
        labels: ["Pre-Apartheid Inflation Mean", "Post-Apartheid Inflation Mean"],
        datasets: [{
            backgroundColor: ["#00aba9", "#e8c3b9"],
            data: [62.9, 37.1],
            borderWidth: 2,
            borderColor: "#fff"
        }]
    },
    options: {
        responsive: true,
        title: {
            display: true,
            text: "Inflation Mean: Pre vs Post Apartheid (%)",
            font: { size: 16 }
        }
    }
});

// Best/Worst Performance Chart
const xValues2 = [
    "Best GDP\n(1964, Pre-Apartheid)",
    "Worst GDP\n(2020, Post-Apartheid)",
    "Best Inflation\n(2004, Post-Apartheid)",
    "Worst Inflation\n(1986, Pre-Apartheid)"
];

const yValues2 = [7.94, -6.17, -0.69, 18.65];
const barColors2 = [
    "rgba(54, 162, 235, 0.7)", "rgba(255, 99, 132, 0.7)",
    "rgba(144, 238, 144, 0.7)", "rgba(255, 206, 86, 0.7)"
];

new Chart("gdpInflationChart", {
    type: "bar",
    data: {
        labels: xValues2,
        datasets: [{
            backgroundColor: barColors2,
            borderColor: barColors2.map(c => c.replace('0.7', '1')),
            borderWidth: 2,
            data: yValues2
        }]
    },
    options: {
        responsive: true,
        legend: { display: false },
        title: {
            display: true,
            text: "Best and Worst Economic Performance",
            font: { size: 16 }
        },
        scales: {
            y: {
                beginAtZero: true,
                title: { display: true, text: 'Value (%)' }
            }
        }
    }
});

// Comparative Bar Chart
new Chart("barChart", {
    type: "bar",
    data: {
        labels: ["Pre-Apartheid (≤1993)", "Post-Apartheid (≥1994)"],
        datasets: [{
            label: "GDP Mean",
            backgroundColor: "rgba(54, 162, 235, 0.7)",
            borderColor: "rgb(54, 162, 235)",
            borderWidth: 2,
            data: [3.17, 2.37]
        }, {
            label: "Inflation Mean",
            backgroundColor: "rgba(255, 99, 132, 0.7)",
            borderColor: "rgba(255, 99, 132)",
            borderWidth: 2,
            data: [9.74, 5.75]
        }]
    },
    options: {
        responsive: true,
        legend: { position: 'top' },
        title: {
            display: true,
            text: "Economic Comparison: Pre vs Post Apartheid",
            font: { size: 16 }
        },
        scales: {
            y: {
                beginAtZero: true,
                title: { display: true, text: 'Mean Value (%)' }
            }
        }
    }
});
</script>

{% endblock %}